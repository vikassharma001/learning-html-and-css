(self.webpackChunkABCD_PDF=self.webpackChunkABCD_PDF||[]).push([[6299],{1103:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="add_method_box">\r\n    <a href="#" class="__pdf_draw_eraser add_method">\r\n        <div>\r\n            <svg t="1636338374384" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10427" width="22" height="22">\r\n                <path d="M112 855.999a8 8 0 0 1 8-8h784a8 8 0 0 1 8 8v48a8 8 0 0 1-8 8H120a8 8 0 0 1-8-8v-48z" fill="#363636" p-id="10428"></path>\r\n                <path d="M642.902 191.411L833.821 382.33 381.428 834.722 190.51 643.803l452.392-452.392z m22.627-67.882c-12.496-12.497-32.758-12.497-45.254 0L122.627 621.176c-12.496 12.497-12.496 32.758 0 45.255l236.174 236.173c12.497 12.497 32.758 12.497 45.255 0l497.647-497.647c12.497-12.496 12.497-32.758 0-45.254L665.529 123.529z" fill="#363636" p-id="10429"></path>\r\n                <path d="M611.647 147.999l252.437 252.437-203.647 203.647L408 351.646l203.647-203.647z" fill="#363636" p-id="10430"></path>\r\n            </svg>\r\n            <div class="add_method_text">\r\n                Eraser\r\n            </div>\r\n        </div>\r\n    </a>\r\n</div>';return __p}},3077:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="add_method_box">\r\n        <label class="__pdf_add_image add_method" for="__pdf_add_image_input">\r\n            <div>\r\n                <svg t="1634797690609" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7052" width="20" height="20">\r\n                    <path d="M855.552 98.816c64.512 0 117.248 51.712 117.248 115.2v592.896c0 63.488-52.224 115.2-117.248 115.2h-675.84c-64.512 0-117.248-51.712-117.248-115.2v-29.696c-1.536-5.632-1.536-11.776 0-17.408V214.016c0-63.488 52.224-115.2 117.248-115.2h675.84zM179.712 168.96c-25.088 0-45.568 19.968-46.08 45.056v374.272c16.896-33.792 33.792-62.464 50.176-85.504 28.672-39.936 56.32-64 85.504-73.728 26.624-8.704 52.224-4.608 75.776 11.264 78.336 54.272 170.496 172.032 217.088 235.52 10.752-15.36 22.016-30.208 33.792-44.544 53.248-65.536 99.84-100.352 142.336-106.496 27.136-3.584 51.712 3.584 71.68 22.016 33.28 30.72 65.536 69.12 92.16 104.448V214.016c0-25.088-20.48-45.056-45.568-45.056H179.712z m495.104 166.4c0-43.52 35.328-78.848 78.848-78.848s78.848 35.328 78.848 78.848-35.328 78.848-78.848 78.848-78.848-35.328-78.848-78.848z" p-id="7053" fill="#D5D0D5"></path>\r\n                </svg>\r\n                <div class="add_method_text">\r\n                    Image\r\n                </div>\r\n            </div>\r\n        </label>\r\n        <input type="file" id="__pdf_add_image_input" class="__pdf_add_image_input" accept="image/jpeg,image/png" style="display:none" />\r\n    </div>';return __p}},3814:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="add_method_box add_draw">\r\n        <div href="#" class="__pdf_draw_line add_method">\r\n            <div>\r\n            <svg t="1640746921759" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3703" width="20" height="20"><path d="M21.19936 958.08l-12.352-12.288a30.208 30.208 0 0 1-7.296-30.912l171.008-516.032c9.344-28.352 28.864-52.16 54.784-66.944L462.22336 211.2a30.208 30.208 0 0 1 36.352 4.864l308.032 308.096c9.6 9.6 11.648 24.448 4.928 36.288l-120.448 235.2c-14.72 25.856-38.528 45.44-66.816 54.848l-515.072 171.904a30.208 30.208 0 0 1-30.976-7.296l-13.312-13.312 304.832-304.896a60.16 60.16 0 0 0 58.88-15.104 61.12 61.12 0 0 0-0.96-86.464 61.12 61.12 0 0 0-86.464-1.024 60.16 60.16 0 0 0-15.168 58.88L21.19936 958.08zM745.74336 19.648l257.472 257.408c26.24 26.24 26.24 68.736 0 94.976L901.13536 474.112a30.208 30.208 0 0 1-42.752 0L548.75136 164.48a30.208 30.208 0 0 1 0-42.752L650.83136 19.648a67.2 67.2 0 0 1 94.912 0z" fill="#666666" p-id="3704"></path></svg>\r\n                <div class="add_method_text add_method_flex">\r\n                    Draw\r\n                    <svg t="1636341110295" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4227" width="10" height="10">\r\n                        <path d="M325.456471 862.280661" p-id="4228"></path>\r\n                        <path d="M882.057788 862.280661" p-id="4229"></path>\r\n                        <path d="M236.028491 877.160382" p-id="4230"></path>\r\n                        <path d="M960.132455 877.160382" p-id="4231"></path>\r\n                        <path d="M63.683483 788.736998" p-id="4232"></path>\r\n                        <path d="M958.469023 788.736998" p-id="4233"></path>\r\n                        <path d="M64.77753 858.792098" p-id="4234"></path>\r\n                        <path d="M163.396533 289.168875c-40.577772 0-66.525252 54.184545-35.441258 85.258218L477.217578 723.704878c20.031716 20.031716 49.823841 20.031716 69.853837 0l349.274345-349.277785c30.304744-30.294423 6.677812-85.258218-34.928639-85.258218L163.396533 289.168875 163.396533 289.168875z" p-id="4235"></path>\r\n                        <path d="M959.523505 858.792098" p-id="4236"></path>\r\n                    </svg>\r\n                </div>\r\n                <div class="draw_color">\r\n                    <div class="draw_title">\r\n                        Colors\r\n                    </div>\r\n                    <ul>\r\n                        <li class="drawcolor transelect" data-color="transparent" style="background:transparent;">\r\n                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">\r\n                                <image id="image0" width="16" height="16" x="0" y="0" href="data:image/png;base64,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 MLoEqMEAAAAASUVORK5CYII="></image>\r\n                            </svg>\r\n                            <svg class="tran_show" t="1634804093852" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14700" width="16" height="16">\r\n                                <path d="M378.88 844.8 25.6 491.52 97.28 417.28 378.88 698.88 926.72 153.6 998.4 225.28Z" p-id="14701" fill="#2c2c2c"></path>\r\n                            </svg>\r\n                        </li>\r\n                        <li class="drawcolor selectwidth" data-color="#FFFFFF" style="background: #FFFFFF">\r\n                            <svg class="widthshow" t="1634804093852" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14700" width="14" height="14">\r\n                                <path d="M378.88 844.8 25.6 491.52 97.28 417.28 378.88 698.88 926.72 153.6 998.4 225.28Z" p-id="14701" fill="#2c2c2c"></path>\r\n                            </svg>\r\n                        </li>\r\n                        <li class="drawcolor selectcolor-active" data-color="#000000" style="background: #000000">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#F44336" style="background: #F44336">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#E91E64" style="background: #E91E64">\r\n                        </li>\r\n                    </ul>\r\n                    <ul>\r\n                       \r\n                        <li class="drawcolor" data-color="#9C28B0" style="background: #9C28B0">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#2196F3" style="background: #2196F3">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#00BCD4" style="background: #00BCD4">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#4CAF50" style="background: #4CAF50">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#FFEC3A" style="background: #FFEC3A">\r\n                        </li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li class="drawcolor" data-color="#FF5722" style="background: #FF5722">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#795548" style="background: #795548">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#E0E0E0" style="background: #E0E0E0">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#9E9E9E" style="background: #9E9E9E">\r\n                        </li>\r\n                        <li class="drawcolor" data-color="#424242" style="background: #424242">\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <div class="line-template">\r\n                        <div class="line-thicl"></div>\r\n                    </div>\r\n                    <div class="range_line">\r\n                        <div class="range_line_text">\r\n                        Thickness\r\n                        </div>\r\n                        <input id="range_val" type="range" max="20" value="4" min="1" />  \r\n                        <div class="thin_thick">\r\n                            <span>Thin</span>\r\n                            <span>Thick</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="close_draw_color">\r\n                    <svg t="1636512580302" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10999" width="15" height="15"><path d="M753.365333 843.861333a64 64 0 0 0 90.496-90.496L602.496 512l241.365333-241.365333a64 64 0 0 0-90.496-90.496L512 421.504 270.634667 180.138667a64 64 0 1 0-90.496 90.496L421.504 512l-241.365333 241.365333a64 64 0 0 0 90.496 90.496L512 602.496l241.365333 241.365333z" p-id="11000" fill="#ABABAB"></path></svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n';return __p}},9949:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="add_method_box add_text">\r\n        <a href="#" class="__pdf_add_text add_method">\r\n            <div>\r\n                <svg t="1634797624694" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6818" width="20" height="20">\r\n                    <path d="M100.992 64h822.016v277.44h-36.352S817.28 172.032 735.424 157.248c-81.856-14.784-138.752-4.608-138.752-4.608l-1.024 707.328s22.72 47.808 60.224 51.2h83.008V960H285.184l1.152-50.048 72.704-1.152s54.592-17.088 54.592-56.896c0-39.744 1.152-693.568 1.152-693.568s-89.792-12.416-136.448-1.024c-46.592 11.328-128.512 79.552-140.992 179.584l-36.352 1.152V64z" p-id="6819" fill="#D3D4D0"></path>\r\n                </svg>\r\n                <div class="add_method_text">\r\n                    Text\r\n                </div>\r\n            </div>\r\n        </a>\r\n    </div>';return __p}},94:(t,i,s)=>{"use strict";s.d(i,{U:()=>e});const e={bindEvents:{},addEventListener:(t,i)=>{t instanceof Array?t.forEach((t=>{e.__bindEvent(t,i)})):e.__bindEvent(t,i)},__bindEvent:(t,i)=>{e.bindEvents[t]||(e.bindEvents[t]=[]),e.bindEvents[t].push(i)},dispatchEvent:(t,i)=>{e.bindEvents[t]&&e.bindEvents[t].forEach((s=>{s({type:t,result:i})}))}}},8083:(t,i,s)=>{"use strict";s.d(i,{E:()=>e});class e{constructor(t,i){this.attrs={},this.toolbar=t,this.pdfEditor=t.pdfEditor,this.container=null,this.name="",this.template=null,this.clickable=!0,this.drawHandles=[],this.active=!1,this.init(),i&&(this.attrs=i),this.initTemplate(),this.initAfter()}init(){}initAfter(){}setAttrs(t){this.attrs=Object.assign(this.attrs,t)}onActive(t){}pageClick(){}setActive(t){this.active!=t&&(this.active=t,this.onActive(t))}initTemplate(){this.container=document.createElement("div"),this.container.classList.add("__toolbar_item","__toolbar_item_"+this.name),this.container.innerHTML=this.template,this.clickable&&this.container.addEventListener("click",(t=>{this.toolbar.setActive(this),this.setActive(!0)}))}setActions(t,i){t.elActions=document.createElement("div"),t.elActions.classList.add("__pdf_el_actions"),t.elActions.style.position="absolute",t.el.appendChild(t.elActions);const s=document.createElement("div");return s.className="__act_item __act_remove",s.innerHTML='<svg t="1637567089744" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2465" width="32" height="32"><path d="M689.257 279.687l-95.113 0c-4.745-41.142-39.749-73.208-82.146-73.208-42.392 0-77.393 32.064-82.139 73.208l-95.118 0c-38.493 0-69.803 31.321-69.803 69.811l0 3.581c0 29.413 18.316 54.591 44.116 64.848l0 329.782c0 38.493 31.314 69.811 69.804 69.811l266.283 0c38.49 0 69.802-31.322 69.802-69.811l0-329.781c25.799-10.26 44.116-35.436 44.116-64.848l0-3.581c0-38.493-31.313-69.813-69.802-69.813zM512 239.587c24.112 0 44.238 17.283 48.692 40.1l-97.375 0c4.452-22.819 24.579-40.1 48.682-40.1zM681.838 747.709c0 20.239-16.465 36.705-36.697 36.705l-266.283 0c-20.23 0-36.697-16.469-36.697-36.705l0-324.818 339.677 0 0 324.818zM725.953 353.08c0 20.239-16.465 36.705-36.697 36.705l-354.514 0c-20.23 0-36.697-16.467-36.697-36.705l0-3.581c0-20.239 16.465-36.705 36.697-36.705l354.515 0c20.23 0 36.697 16.467 36.697 36.705l0 3.581zM423.251 742.074c9.142 0 16.553-7.414 16.553-16.553l0-186.382c0-9.141-7.412-16.554-16.553-16.554s-16.553 7.415-16.553 16.554l0 186.382c-0.002 9.142 7.41 16.553 16.552 16.553zM512 742.074c9.143 0 16.554-7.415 16.554-16.553l0-186.382c0-9.141-7.415-16.554-16.554-16.554-9.142 0-16.553 7.415-16.553 16.554l0 186.382c0 9.142 7.41 16.553 16.552 16.553zM600.749 742.074c9.142 0 16.552-7.414 16.552-16.553l0-186.382c0-9.141-7.412-16.554-16.552-16.554-9.143 0-16.553 7.415-16.553 16.554l0 186.382c-0.002 9.142 7.414 16.553 16.553 16.553z" p-id="2466"></path></svg>',s.addEventListener("click",(i=>{t.page.elements.remove(t.id)})),t.elActions.appendChild(s),i&&i(t,this),t.elActions}enable(){this.drawHandles.forEach((t=>{t.enable()}))}disable(){this.drawHandles.forEach((t=>{t.disable()}))}getOffset(t,i,s){return null==i&&(i=0),null==s&&(s=0),t.offsetParent?(i+=t.offsetLeft,s+=t.offsetTop,this.getOffset(t.offsetParent,i,s)):{left:i,top:s}}getPos(t){let i=this.pdfEditor.mainBox.scrollLeft,s=this.pdfEditor.mainBox.scrollTop;return{x:t.pageX-this.offset.left+i,y:t.pageY-this.offset.top+s}}}},3843:(t,i,s)=>{"use strict";s.d(i,{Z:()=>r});var e=s(8083),a=s(4634);class n extends e.E{init(){this.name="eraser",this.template=s(1103)();let t={background:"#ffffff",opacity:1,rotate:null};n.attrs&&(t=Object.assign(t,n.attrs)),this.setAttrs(t),this.minWidth=13,this.minHeight=13}setAttrs(t){super.setAttrs(t);for(let t in this.drawHandles){let i=this.drawHandles[t];i.background=this.attrs.background,i.opacity=this.attrs.opacity}}createDrawHandle(t){return new a.Z({container:t.elementLayer,scrollElement:this.pdfEditor.mainBox,background:this.attrs.background,opacity:this.attrs.opacity,onFinished:i=>{i.width<this.minWidth&&i.height<this.minHeight||t.elements.add("rect",{width:i.width,height:i.height,opacity:this.attrs.opacity,background:this.attrs.background,rotate:this.attrs.rotate},{pos:{x:i.x,y:i.y},setActions:t=>{this.setActions(t,n.actions)}})}})}onActive(t){let i=this.pdfEditor.pages.pageActive;if(!this.drawHandles[i]){let t=this.pdfEditor.pages.get(i);this.drawHandles[i]=this.createDrawHandle(t)}t?this.enable():this.disable()}pageClick(t){let i=t.result.page,s=i.pageNum;if(this.drawHandles[s])return;const e=this.createDrawHandle(i);e.offset=e.getOffset(e.container),e.drawing=!0,e.firstPos=e.getPos(t.result.evt),e.onDown(t),this.drawHandles[i.pageNum]=e}}const r=n},685:(t,i,s)=>{"use strict";s.d(i,{Z:()=>n});var e=s(8083);class a extends e.E{init(){this.name="image",this.template=s(3077)();let t={opacity:1,rotate:null};a.attrs&&(t=Object.assign(t,a.attrs)),this.setAttrs(t)}initAfter(){this.btnImage=this.container.querySelector(".__pdf_add_image_input"),this.btnImage.addEventListener("change",(t=>{let i=t.target.files[0];if(i){let t=new window.Image;t.addEventListener("load",(()=>{URL.revokeObjectURL(i);const s=new FileReader;s.readAsArrayBuffer(i),s.addEventListener("loadend",(async s=>{let e=this.pdfEditor.pages.pageActive;this.pdfEditor.pages.get(e).elements.add("image",{image:t,imageType:i.type,opacity:this.attrs.opacity,arrayBuffer:s.target.result,rotate:this.attrs.rotate},{setActions:t=>{this.setActions(t,a.actions)}})}))})),t.src=URL.createObjectURL(i),t.style.width="100%",t.style.height="100%"}this.btnImage.value=""}))}}const n=a},3037:(t,i,s)=>{"use strict";s.d(i,{Z:()=>o});var e=s(8083),a=s(7886);class n extends a.Z{constructor(t){super(t),this.options=Object.assign({lineWidth:2,lineColor:"#000000",lineCap:"round",fixedX:!1,fixedY:!1,canvasWidth:null,canvasHeight:null,style:null},this.options),this.beginPoint={},this.points=[],this.boxRect={left:0,right:0,top:0,bottom:0,width:0,height:0},this.lineWidth=this.options.lineWidth,this.lineColor=this.options.lineColor,this.lineCap=this.options.lineCap}onDown(t){this.initCanvas(),this.container.appendChild(this.canvas),this.ctx.lineCap=this.lineCap,this.ctx.lineWidth=this.lineWidth,this.ctx.strokeStyle=this.lineColor;let i=this.getPos(t);this.beginPoint=i,this.points.push(i),this.boxRect.left||(this.boxRect.left=i.x),this.boxRect.top||(this.boxRect.top=i.y)}onMove(t){let i=this.getPos(t);if(this.points.push(i),this.flushBoxRect(i),this.points.length>3){const t=this.points.slice(-2),i=t[0],s={x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};this.drawLine(this.beginPoint,i,s),this.beginPoint=s}}onUp(t){let i=this.getPos(t);if(this.points.push(i),this.flushBoxRect(i),this.points.length>3){const t=this.points.slice(-2),i=t[0],s=t[1];this.drawLine(this.beginPoint,i,s)}this.beginPoint=null,this.points=[];let s=Math.max(0,this.boxRect.left-this.lineWidth),e=Math.max(0,this.boxRect.top-this.lineWidth),a=this.boxRect.width+2*this.lineWidth,n=this.boxRect.height+2*this.lineWidth,r=this.ctx.getImageData(s,e,a,n),l=document.createElement("canvas");l.width=a,l.height=n,l.getContext("2d").putImageData(r,0,0);let o=l.toDataURL("image/png",1);return l.remove(),[{x:s,y:e,width:a,height:n},o]}initCanvas(){if(this.canvas)return;if(this.canvas=document.createElement("canvas"),this.canvas.classList.add("__draw_canvas"),this.options.style)for(let t in this.options.style)this.canvas.style.setProperty(t,this.options.style[t]);let t=this.container.getBoundingClientRect(),i=this.options.canvasWidth?this.options.canvasWidth:t.width,s=this.options.canvasHidth?this.options.canvasHidth:t.height;this.canvas.width=i,this.canvas.height=s,this.ctx=this.canvas.getContext("2d")}clearCanvas(){this.canvas.width=this.canvas.width,this.boxRect={left:0,right:0,top:0,bottom:0,width:0,height:0}}drawLine(t,i,s){this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.quadraticCurveTo(i.x,i.y,s.x,s.y),this.ctx.stroke(),this.ctx.closePath()}getPos(t){let i=0,s=0;return this.scrollElement&&(i=this.scrollElement.scrollLeft,s=this.scrollElement.scrollTop),{x:(this.options.fixedX?this.firstPos.x:t.pageX)-this.offset.left+i,y:(this.options.fixedY?this.firstPos.y:t.pageY)-this.offset.top+s}}flushBoxRect(t){return t.x<this.boxRect.left&&(this.boxRect.left=t.x),t.x>this.boxRect.right&&(this.boxRect.right=t.x),t.y<this.boxRect.top&&(this.boxRect.top=t.y),t.y>this.boxRect.bottom&&(this.boxRect.bottom=t.y),this.boxRect.width=this.boxRect.right-this.boxRect.left,this.boxRect.height=this.boxRect.bottom-this.boxRect.top,this.boxRect}}const r=n;class l extends e.E{init(){this.name="line",this.template=s(3814)();let t={width:2,color:"#000000",cap:"round",opacity:1,style:{position:"absolute",top:0,left:0},rotate:null};l.attrs&&(t=Object.assign(t,l.attrs)),this.setAttrs(t),this.minWidth=13,this.minHeight=13}setAttrs(t){super.setAttrs(t);for(let t in this.drawHandles){let i=this.drawHandles[t];i.lineWidth=this.attrs.width,i.lineColor=this.attrs.color,i.lineCap=this.attrs.cap,i.opacity=this.attrs.opacity}}createDrawHandle(t){const i=new r({container:t.elementLayer,scrollElement:this.pdfEditor.mainBox,lineWidth:this.attrs.width,lineColor:this.attrs.color,lineCap:this.attrs.cap,style:this.attrs.style,onFinished:async(s,e)=>{if(i.clearCanvas(),s.width<this.minWidth&&s.height<this.minHeight)return;let a=new Image;a.src=e,a.style.width="100%",a.style.height="100%",t.elements.add("image",{width:s.width,height:s.height,opacity:this.attrs.opacity,image:a,imageType:"image/png",arrayBuffer:e,rotate:this.attrs.rotate},{pos:{x:s.x,y:s.y},setActions:t=>{this.setActions(t,l.actions)}})}});return i}onActive(t){let i=this.pdfEditor.pages.pageActive;if(!this.drawHandles[i]){let t=this.pdfEditor.pages.get(i);this.drawHandles[i]=this.createDrawHandle(t)}t?this.enable():this.disable()}pageClick(t){let i=t.result.page,s=i.pageNum;if(this.drawHandles[s])return;const e=this.createDrawHandle(i);e.offset=e.getOffset(e.container),e.drawing=!0,e.firstPos=e.getPos(t.result.evt),e.onDown(t.result.evt),this.drawHandles[i.pageNum]=e}}const o=l},8217:(t,i,s)=>{"use strict";s.d(i,{Z:()=>n});var e=s(8083);class a extends e.E{init(){this.name="text",this.template=s(9949)();let t={size:20,color:"#000000",text:"Text",lineHeight:null,font:"Helvetica",opacity:1,underline:null,background:null,bold:!1,italic:!1,rotate:null};a.attrs&&(t=Object.assign(t,a.attrs)),this.setAttrs(t)}pageClick(t){let i=t.result.page;this.offset=this.getOffset(i.elementLayer),i.elements.add("textCanvas",this.attrs,{pos:this.getPos(t.result.evt),setActions:t=>{this.setActions(t,a.actions)}})}}const n=a}}]);